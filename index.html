<!DOCTYPE html>
<html lang="en" ng-app="image-translation">
	<head>
		<meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />        
	  <title>Image Translation App</title>	  

	  <!-- AngularJS + custom JavaScript -->
	  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
	  <script>
	  	var app = angular.module('image-translation', []);			
			app.controller('ImageTranslationCtrl', ['$scope', '$http', '$httpParamSerializerJQLike', 
			function ImageTranslationCtrl($scope, $http, $httpParamSerializerJQLike) {			  
			  $scope.predict = function(url) {
			  	
			  	var req = {
					 method: 'POST',
					 url: 'http://localhost:7777/predict/',
					 headers: {
			      	'Content-Type': 'application/x-www-form-urlencoded', 
			      	'Accept': 'application/json' 
			    	},
					 data: $httpParamSerializerJQLike({url: url}),
					};
			  	$http(req).then(function(success) {
			  		$scope.concepts = success.data;			  		
					}, function(failure) {});
			  }
			}]);	  	
	  </script>	

	  <!-- Bootstrap + custom CSS -->
	  <link rel = "stylesheet" type = "text/css" href = "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>  	  
		<style type="text/css">
			body { padding: 50px 50px; text-align: center; }
		</style>
		
	</head>
	<body ng-controller="ImageTranslationCtrl">
			<div class="col-md-12">
				<h1>Image Translation</h1><h3>Enter image URL below:</h3>
				<form>
					 <input type="text" ng-model="url" />
					 <input type="submit" ng-click="predict(url)"/>
				</form>
			  <h3 ng-if="concepts">
			  		<div class="row" ng-repeat="(name, value) in concepts">
			  			<div class="col-md-4"></div>
			  			<div class="col-md-2">{{name}}:</div>
			  			<div class="col-md-2">{{value}} %</div>
			  			<div class="col-md-4"></div>
			  		</div>			  					  				  				  	
				</h3>
			</div>			
	</body>	
</html>